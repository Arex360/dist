webpackJsonp([11],{pd2Q:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("WT6e"),l=function(){},i=n("zbUj"),a=n("Xjw4"),s=n("ItHS"),r=n("7fwu"),u=n("DSlP"),d=n("Yp9g"),p=n("ahs1"),c=n("OE0E"),f=n("bfOx"),m=n("Q6EV"),h=n("X00s"),g=n("nmbt"),b=n("7DMc"),v=function(){function e(e,t,n,o,l,i,a,s,r){this.http=e,this.authService=t,this.toastr=n,this.ngProgress=o,this.activatedRoute=l,this.bookService=i,this.magasinService=a,this.title=s,this.platformId=r,this.target_origin="https://library.mominoun.com",this.DIR_ELECTRONIC_BOOK="kotob-electroniya/",this.DIR_TRANSLATE_BOOK="kotob-motarjama/",this.DIR_VERSIONS_BOOK="isdarat/",this.DIR_MAGASIN="majalat/",this.MAGASIN_YATAFAKARON="/Yatafakkaroun/",this.MAGASIN_THEWHAT="/thewhat/",this.MAGASIN_TAAWILIAT="/taawiliat/",this.MAGASIN_ALBAB="/Albab/",this.page="1",this.pageChoosed="",this.storageFlip=g.Z,this.hrefIframe="5",this.showSavebtn=""}return e.prototype.ngOnInit=function(){var e=this;window.addEventListener&&window.addEventListener("message",function(t){t.origin===e.target_origin&&(t.data.href&&(e.hrefIframe=t.data.href),t.data.display&&(e.showSavebtn=t.data.display))}),this.token=localStorage.getItem("token"),this.idModel=this.activatedRoute.snapshot.params.id,this.typePdf=this.activatedRoute.snapshot.params.type,this.model=this.activatedRoute.snapshot.params.model,this.authService.UserObsevable.subscribe(function(t){if(e.user=t,e.user.reads)for(var n=0,o=e.user.reads;n<o.length;n++){var l=o[n];if(l.idModel==e.idModel&&l.pdf==e.typePdf){e.page=l.page;break}}},function(e){}),["pdf","pdfDemo","pdfIndex","demoVT"].includes(this.typePdf)||window.close(),"book"==this.model?this.getBook():"magasin"==this.model?this.getMagasin():window.close()},e.prototype.resize=function(e){this.resizeFlipBook()},e.prototype.resizeFlipBook=function(){Object(a.isPlatformBrowser)(this.platformId)&&(this.iframeEl=$("#iframe"),this.iframeEl.width(window.innerWidth-4),this.iframeEl.height(window.innerHeight-15))},e.prototype.createIframe=function(e){var t=this;Object(a.isPlatformBrowser)(this.platformId)&&(this.iframeEl=document.createElement("iframe"),this.iframeEl.id="iframe",this.iframeEl.allowFullscreen=!0,this.iframeEl.src=e,this.iframeEl.width=window.innerWidth-4+"",this.iframeEl.height=window.innerHeight-15+"",this.iframeEl.onload=function(){t.sendMsgToIframe({token:localStorage.getItem("token")});var e=setTimeout(function(){t.loadIframe=!0,$("iframe").contents().find("style")[0]&&($("iframe").contents().find("style")[0].innerHTML+=".miniTitle{display:none}.phoneBottomBar .button:nth-child(4){display:none;}"),clearTimeout(e)},1e3)},$("#flipBook").append(this.iframeEl),this.resizeFlipBook())},e.prototype.getBook=function(){var e=this;this.ngProgress.start(),this.bookService.getById(this.idModel).subscribe(function(t){e.objet=t,e.storageFlip+=e.getDirFlipBook(e.objet.type),"pdf"==e.typePdf?e.link=e.storageFlip+e.objet.pdf+"/?token="+e.token+"#p="+e.page:"pdfDemo"==e.typePdf?e.link=e.storageFlip+e.objet.pdfDemo+"/?token="+e.token+"#p="+e.page:"pdfIndex"==e.typePdf&&(e.link=e.storageFlip+e.objet.pdfIndex+"/?token="+e.token+"#p="+e.page),e.ngProgress.done(),e.createIframe(e.link),e.title.setTitle(g._8+"-"+e.objet.name),e.pageChoosed=e.page},function(t){window.close(),Object(d.a)(t,e.toastr,e.ngProgress,e.authService,"login")})},e.prototype.getMagasin=function(){var e=this,t="";this.ngProgress.start(),this.magasinService.getById(this.idModel).subscribe(function(n){e.objet=n,"\u0630\u0648\u0627\u062a"==n.category?t=e.MAGASIN_THEWHAT:"\u0623\u0644\u0628\u0627\u0628"==n.category?t=e.MAGASIN_ALBAB:"\u064a\u062a\u0641\u0643\u0631\u0648\u0646"==n.category?t=e.MAGASIN_YATAFAKARON:"\u062a\u0623\u0648\u064a\u0644\u064a\u0627\u062a"==n.category&&(t=e.MAGASIN_TAAWILIAT),e.storageFlip+=e.DIR_MAGASIN,"pdf"==e.typePdf?e.link=e.storageFlip+t+e.objet.pdf+"/?token="+e.token+"#p="+e.page:"pdfDemo"==e.typePdf&&(e.link=e.storageFlip+t+e.objet.pdfDemo+"/?token="+e.token+"#p="+e.page),e.ngProgress.done(),e.createIframe(e.link),e.title.setTitle(g._8+"-"+e.objet.name),e.pageChoosed=e.page},function(t){window.close(),Object(d.a)(t,e.toastr,e.ngProgress,e.authService,"login")})},e.prototype.savePage=function(){var e=this;this.getPage();var t=document.getElementsByClassName("btn-save")[0];t.disabled=!0;var n=setTimeout(function(){var o=e.hrefIframe.split("#p=")[1];e.authService.addToReads({idModel:e.objet._id,name:e.objet.name,page:o,type:e.model,pdf:e.typePdf}).subscribe(function(n){e.toastr.success("\u062a\u0645\u062a \u0627\u0644\u0639\u0645\u0644\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"),t.disabled=!1,Object(a.isPlatformBrowser)(e.platformId)&&$(".bd-page").modal("hide")},function(n){t.disabled=!1,Object(d.a)(n,e.toastr,e.ngProgress,e.authService,"login")}),clearTimeout(n)},1e3)},e.prototype.getPage=function(){this.sendMsgToIframe("page")},e.prototype.sendMsgToIframe=function(e){document.getElementById("iframe").contentWindow.postMessage(e,this.target_origin)},e.prototype.getDirFlipBook=function(e){return"\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"==e?this.DIR_ELECTRONIC_BOOK:"\u0625\u0635\u062f\u0627\u0631\u0627\u062a"==e?this.DIR_VERSIONS_BOOK:"\u062a\u0631\u062c\u0645\u0627\u062a"==e?this.DIR_TRANSLATE_BOOK:void 0},e}(),I=o["\u0275crt"]({encapsulation:0,styles:[[".btn-save[_ngcontent-%COMP%]{position:fixed;bottom:45px;margin:20px;right:-7px}.grp-input[_ngcontent-%COMP%]{position:relative}.grp-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:31px}.icon-input[_ngcontent-%COMP%]{position:absolute;top:4px;font-size:21px;right:5px}"]],data:{}});function y(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,10,"p",[["class","saving text-center"]],null,null,null,null,null)),(e()(),o["\u0275ted"](-1,null,["\u0627\u0644\u0645\u0631\u062c\u0648 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631 \u0642\u0644\u064a\u0644\u0627\n  "])),(e()(),o["\u0275eld"](2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),o["\u0275ted"](-1,null,["."])),(e()(),o["\u0275ted"](-1,null,["\n  "])),(e()(),o["\u0275eld"](5,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),o["\u0275ted"](-1,null,["."])),(e()(),o["\u0275ted"](-1,null,["\n  "])),(e()(),o["\u0275eld"](8,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),o["\u0275ted"](-1,null,["."])),(e()(),o["\u0275ted"](-1,null,["\n"]))],null,null)}function A(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,4,"button",[["class","btn btn-light  btn-save border"],["placement","left"],["show-delay","200"],["tooltip","\u062d\u0641\u0638 \u0627\u0644\u0635\u0641\u062d\u0629 "],["tooltip-class","tool"]],null,[[null,"click"],[null,"focusin"],[null,"mouseenter"],[null,"focusout"],[null,"mouseleave"]],function(e,t,n){var l=!0,i=e.component;return"focusin"===t&&(l=!1!==o["\u0275nov"](e,1).onMouseEnter()&&l),"mouseenter"===t&&(l=!1!==o["\u0275nov"](e,1).onMouseEnter()&&l),"focusout"===t&&(l=!1!==o["\u0275nov"](e,1).onMouseLeave()&&l),"mouseleave"===t&&(l=!1!==o["\u0275nov"](e,1).onMouseLeave()&&l),"click"===t&&(l=!1!==o["\u0275nov"](e,1).onClick(n)&&l),"click"===t&&(l=!1!==i.savePage()&&l),l},null,null)),o["\u0275did"](1,212992,null,0,i.b,[o.ElementRef,o.ComponentFactoryResolver,o.ApplicationRef,o.Injector],{tooltipValue:[0,"tooltipValue"],placement:[1,"placement"],tooltipClass:[2,"tooltipClass"],showDelay:[3,"showDelay"]},null),(e()(),o["\u0275ted"](-1,null,["\n  "])),(e()(),o["\u0275eld"](3,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-floppy-o"]],null,null,null,null,null)),(e()(),o["\u0275ted"](-1,null,["\n  \u062d\u0641\u0638\n"]))],function(e,t){e(t,1,0,"\u062d\u0641\u0638 \u0627\u0644\u0635\u0641\u062d\u0629 ","left","tool","200")},null)}function k(e){return o["\u0275vid"](0,[o["\u0275qud"](402653184,1,{form:0}),(e()(),o["\u0275ted"](-1,null,["\n"])),(e()(),o["\u0275and"](16777216,null,null,1,null,y)),o["\u0275did"](3,16384,null,0,a.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),o["\u0275ted"](-1,null,["\n\n"])),(e()(),o["\u0275eld"](5,0,null,null,1,"div",[["id","flipBook"]],null,null,null,null,null)),(e()(),o["\u0275ted"](-1,null,["\n\n"])),(e()(),o["\u0275ted"](-1,null,["\n"])),(e()(),o["\u0275and"](16777216,null,null,1,null,A)),o["\u0275did"](9,16384,null,0,a.NgIf,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),o["\u0275ted"](-1,null,["\n"])),(e()(),o["\u0275ted"](-1,null,["\n\n"])),(e()(),o["\u0275ted"](-1,null,["\n "]))],function(e,t){var n=t.component;e(t,3,0,!n.loadIframe),e(t,9,0,n.objet&&n.loadIframe&&"show"==n.showSavebtn)},null)}var w=o["\u0275ccf"]("app-flip-book",v,function(e){return o["\u0275vid"](0,[(e()(),o["\u0275eld"](0,0,null,null,1,"app-flip-book",[],null,[["window","resize"]],function(e,t,n){var l=!0;return"window:resize"===t&&(l=!1!==o["\u0275nov"](e,1).resize(n)&&l),l},k,I)),o["\u0275did"](1,114688,null,0,v,[s.c,r.a,u.a,p.a,f.a,m.a,h.a,c.Title,o.PLATFORM_ID],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),M=n("hjKG"),_=n("iJbe"),O=function(){};n.d(t,"FlipBookModuleNgFactory",function(){return T});var T=o["\u0275cmf"](l,[],function(e){return o["\u0275mod"]([o["\u0275mpd"](512,o.ComponentFactoryResolver,o["\u0275CodegenComponentFactoryResolver"],[[8,[w,M.a]],[3,o.ComponentFactoryResolver],o.NgModuleRef]),o["\u0275mpd"](4608,a.NgLocalization,a.NgLocaleLocalization,[o.LOCALE_ID,[2,a["\u0275a"]]]),o["\u0275mpd"](4608,b["\u0275i"],b["\u0275i"],[]),o["\u0275mpd"](512,a.CommonModule,a.CommonModule,[]),o["\u0275mpd"](512,f.p,f.p,[[2,f.u],[2,f.m]]),o["\u0275mpd"](512,O,O,[]),o["\u0275mpd"](512,i.c,i.c,[]),o["\u0275mpd"](512,b["\u0275ba"],b["\u0275ba"],[]),o["\u0275mpd"](512,b.FormsModule,b.FormsModule,[]),o["\u0275mpd"](512,l,l,[]),o["\u0275mpd"](1024,f.k,function(){return[[{path:"",component:v,canActivate:[_.a]}]]},[])])})}});